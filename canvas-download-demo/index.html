<!DOCTYPE html>
<html>

<head>
    <title>Canvas Download Image Demo</title>
    <style>
        #myCanvas {
            border: 1px solid;
        }
    </style>
</head>

<body onload="init()">
    <canvas width="568" height="360" id="canvas">
        Sorry, no canvas available
    </canvas>
    <br/>

    <a href="#" download="puki.txt">HERE</a>

    <hr />

    <a href="#" id="download" onclick="downloadImg(this)">
          Download as image
      </a>
    <script src="lib/moment.js"></script>
    <script src="js/tryMoment.js"></script>
    <script>
        var canvas;
        var ctx;

        function init() {
            canvas = document.getElementById('canvas');
            ctx = canvas.getContext('2d');
            drawOnCanvas();
        }



        /**
        * Demonstrates how to download a canvas an image with a single
        * direct click on a link.
        */
        function drawOnCanvas() {
            var img = new Image();
            img.src = "img/meme.png";

            img.onload = function () {
                ctx.drawImage(img, 0, 0, 568, 360);

                ctx.font = "50px 'Segoe UI'";
                ctx.fillStyle = 'white';
                ctx.fillText("Text on Canvas", 50, 300);
            };
        }

        /**
        * This is the function that will take care of image extracting and
        * setting proper filename for the download.
        * IMPORTANT: Call it from within a onclick event.
        */
        function downloadImg(elLink) {
            elLink.href = canvas.toDataURL();
            elLink.download = 'perfectMeme.jpg';
        }
    </script>
</body>

</html>